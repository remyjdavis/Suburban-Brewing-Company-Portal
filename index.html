<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Suburban Brewing Company | Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    /* ... (Styles remain exactly as you have them) ... */
    * { box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; }
    body { margin: 0; background: #f4f6f8; color: #1f2937; }
    .layout { display: flex; min-height: 100vh; }
    .sidebar { width: 240px; background: #1f2937; color: #ffffff; padding: 20px 0; flex-shrink: 0; }
    .sidebar h2 { margin: 0 20px 20px; font-size: 18px; font-weight: 600; }
    .nav-section { margin-bottom: 24px; }
    .nav-section-title { font-size: 11px; text-transform: uppercase; opacity: 0.6; margin: 0 20px 8px; letter-spacing: 1px; font-weight: 700; }
    .nav-link { position: relative; display: block; padding: 10px 20px 10px 24px; color: #d1d5db; text-decoration: none; font-size: 14px; transition: background 0.15s ease, color 0.15s ease; }
    .nav-link:hover { background: #374151; color: #ffffff; }
    .nav-link.active { background: #374151; color: #ffffff; font-weight: 500; }
    .nav-link.active::before { content: ""; position: absolute; left: 0; top: 0; width: 4px; height: 100%; background: #3b82f6; }
    .main { flex: 1; display: flex; flex-direction: column; }
    .topbar { background: #ffffff; border-bottom: 1px solid #e5e7eb; padding: 16px 24px; display: flex; justify-content: space-between; align-items: center; }
    .topbar h1 { font-size: 20px; margin: 0; font-weight: 600; }
    .breadcrumb { font-size: 13px; color: #6b7280; margin-top: 4px; }
    .date { font-size: 14px; color: #6b7280; }
    .content { padding: 24px; }
    .cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px; }
    .card { background: #ffffff; border-radius: 8px; padding: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); transition: transform 0.15s ease, box-shadow 0.15s ease; }
    .card:hover { transform: translateY(-2px); box-shadow: 0 6px 14px rgba(0,0,0,0.08); }
    .card h3 { margin: 0 0 8px; font-size: 15px; font-weight: 600; }
    .card .value { font-size: 28px; font-weight: 700; margin-bottom: 4px; }
    .card p { margin: 0; font-size: 13px; color: #6b7280; }
  </style>
</head>

<body>
<div class="layout">

  <aside class="sidebar">
    <h2>Suburban Brewing</h2>

    <div class="nav-section">
      <div class="nav-section-title">Dashboard</div>
      <a class="nav-link active" href="index.html">Overview</a>
    </div>

    <div class="nav-section">
      <div class="nav-section-title">Sales & Deliveries</div>
      <a class="nav-link" href="sales/invoices.html">Invoices</a>
      <a class="nav-link" href="sales/leads.html">Sales Leads</a>
      <a class="nav-link" href="sales/deliveries.html">Deliveries</a>
    </div>

    <div class="nav-section">
      <div class="nav-section-title">Sampling Outreach</div>
      <a class="nav-link" href="Samplings/Schedule-Sampling.html">Schedule New</a>
      <a class="nav-link" href="Samplings/sampling-report.html">Log Report</a>
      <a class="nav-link" href="Samplings/sampling-calendar.html">Calendar View</a>
    </div>

    <div class="nav-section">
      <div class="nav-section-title">Inventory Management</div>
      <a class="nav-link" href="inventory/brewery.html">Brewery Master</a>
      <a class="nav-link" href="inventory/wholesaler-inventory.html">Wholesaler Inventory</a>
      <a class="nav-link" href="inventory/restaurant-inventory.html">Restaurant Inventory</a>
    </div>

    <div class="nav-section">
      <div class="nav-section-title">Reports</div>
      <a class="nav-link" href="reports/monthly-sales.html">Monthly Sales</a>
      <a class="nav-link" href="reports/sales-route.html">Sales Route</a>
      <a class="nav-link" href="reports/client-inventory.html">Client Inventory</a>
    </div>
  </aside>

  <div class="main">
    <header class="topbar">
      <div>
        <h1>Dashboard Overview</h1>
        <div class="breadcrumb">Home / Dashboard</div>
      </div>
      <div class="date" id="today"></div>
    </header>

    <section class="content">
      <div class="cards">
        <div class="card">
          <h3>Today’s Sales</h3>
          <div class="value">$0.00</div>
          <p>Invoices created today</p>
        </div>

        <div class="card">
          <h3>Open Invoices</h3>
          <div class="value">0</div>
          <p>Pending or unpaid</p>
        </div>

        <div class="card">
          <h3>Active Deliveries</h3>
          <div class="value">0</div>
          <p>Scheduled for today</p>
        </div>

        <div class="card" onclick="location.href='Samplings/sampling-calendar.html'" style="cursor: pointer; border-bottom: 4px solid #3b82f6; min-height: 160px;">
          <div style="display: flex; justify-content: space-between; align-items: flex-start;">
            <h3>Upcoming Sampling</h3>
            <span id="samplingCount" style="background: #eff6ff; color: #2563eb; padding: 2px 8px; border-radius: 12px; font-size: 12px; font-weight: 700;">0</span>
          </div>
          
          <div id="samplingPreview" style="margin-top: 12px;">
            <div style="font-size: 13px; color: #9ca3af; font-style: italic;">No events scheduled...</div>
          </div>

          <p style="margin-top: 15px; font-size: 11px; color: #3b82f6; font-weight: 600;">VIEW FULL CALENDAR →</p>
        </div>
      </div>
    </section>
  </div>
</div>

<script>
  document.getElementById("today").textContent =
    new Date().toLocaleDateString(undefined, {
      weekday: "long",
      month: "short",
      day: "numeric",
      year: "numeric"
    });
  <script>
  // 1. Set the Date
  document.getElementById("today").textContent =
    new Date().toLocaleDateString(undefined, {
      weekday: "long",
      month: "short",
      day: "numeric",
      year: "numeric"
    });

  // 2. Fetch Real Data from Apps Script
  const API_URL = "https://script.google.com/macros/s/AKfycbxph5eskMBLUSUmeYhyodhoDjUlPvhPLDNos5iyCOuA4_ik2sTSPi0S3kn-l-M8fNgYSQ/exec";

  async function loadDashboardData() {
    try {
      // Fetch upcoming samplings
      const response = await fetch(`${API_URL}?action=getSamplingEvents`, { redirect: "follow" });
      const events = await response.json();
      
      // Filter for future events only (optional)
      const now = new Date();
      now.setHours(0,0,0,0);
      const upcoming = events.filter(ev => new Date(ev.date) >= now);

      updateSamplingPreview(upcoming);
    } catch (err) {
      console.error("Dashboard Load Error:", err);
      document.getElementById('samplingPreview').innerHTML = 
        '<div style="font-size: 11px; color: #ef4444;">Failed to sync with Google Sheets.</div>';
    }
  }

  function updateSamplingPreview(events) {
    const container = document.getElementById('samplingPreview');
    const countBadge = document.getElementById('samplingCount');
    
    if (!events || events.length === 0) {
        container.innerHTML = '<div style="font-size: 13px; color: #9ca3af;">No samplings scheduled.</div>';
        countBadge.innerText = '0';
        return;
    }

    countBadge.innerText = events.length;
    
    // Show the next 3 events
    container.innerHTML = events.slice(0, 3).map(ev => {
        // Format the date to look like "Dec 31"
        const d = new Date(ev.date);
        const dateStr = d.toLocaleDateString(undefined, { month: 'short', day: 'numeric' });
        
        return `
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; border-left: 2px solid #3b82f6; padding-left: 8px;">
            <span style="font-size: 13px; font-weight: 600; color: #1f2937;">${ev.name}</span>
            <span style="font-size: 11px; color: #6b7280;">${dateStr}</span>
        </div>
        `;
    }).join('');
  }

  // Run the fetch when the page loads
  loadDashboardData();
</script>
</script>
</body>
</html>
