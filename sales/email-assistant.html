<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Suburban Brewing Co. | Sales Assistant</title>
  <style>
    /* --- REUSING YOUR EXISTING THEME VARIABLES --- */
    :root {
      --bg: #f4f6f8; --sidebar: #0f172a; --accent: #2563eb; --text: #1f2937; --text-muted: #6b7280;
      --green-accent: #10b981;
    }
    * { box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; }
    body { margin: 0; background: var(--bg); color: var(--text); display: flex; min-height: 100vh; }
    
    /* --- MOCK SIDEBAR (For Visual Context Only) --- */
    .sidebar { width: 260px; background: var(--sidebar); color: #fff; padding: 24px; flex-shrink: 0; height: 100vh; }
    .sidebar h2 { margin: 0 0 32px; font-size: 20px; }
    .mock-link { display: block; padding: 10px 15px; color: #94a3b8; text-decoration: none; border-radius: 6px; margin-bottom: 5px; }
    .mock-link.active { background: #374151; color: #fff; border-left: 4px solid var(--accent); }

    /* --- MAIN CONTENT AREA --- */
    .main { flex: 1; display: flex; flex-direction: column; }
    .topbar { background: #fff; border-bottom: 1px solid #e5e7eb; padding: 16px 24px; display: flex; justify-content: space-between; align-items: center; }
    .content { padding: 30px; flex-grow: 1; }

    /* --- EMAIL ASSISTANT GRID LAYOUT --- */
    .assistant-grid {
        display: grid;
        grid-template-columns: 350px 1fr; /* Fixed width controls, flexible preview */
        gap: 30px;
        height: calc(100vh - 150px); /* Fill remaining height */
    }

    /* Panels */
    .panel {
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.08);
        padding: 25px;
        display: flex;
        flex-direction: column;
    }
    
    .panel h3 { margin: 0 0 20px; padding-bottom: 10px; border-bottom: 2px solid #f1f5f9; color: #1e293b; }

    /* Controls (Left Panel) */
    .form-group { margin-bottom: 20px; }
    .form-label { display: block; font-weight: 700; font-size: 12px; text-transform: uppercase; color: #64748b; margin-bottom: 8px; }
    .form-select, .form-input { width: 100%; padding: 12px; border: 1px solid #cbd5e1; border-radius: 8px; font-size: 14px; color: #334155; }
    
    .client-card-preview {
        background: #f8fafc; padding: 15px; border-radius: 8px; border: 1px solid #e2e8f0; margin-top: 10px; display: none;
    }
    .client-card-preview.active { display: block; animation: fadeIn 0.3s ease; }

    /* Preview & Editor (Right Panel) */
    .email-editor-container { flex-grow: 1; display: flex; flex-direction: column; gap: 15px; }
    .email-header-field { display: flex; align-items: center; border-bottom: 1px solid #f1f5f9; padding-bottom: 10px; }
    .email-header-label { width: 80px; font-weight: 600; color: #94a3b8; }
    .email-header-value { font-weight: 500; color: #1e293b; flex-grow: 1; }
    
    .email-body-textarea {
        flex-grow: 1;
        width: 100%;
        padding: 20px;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        resize: none;
        font-family: 'Segoe UI', sans-serif;
        font-size: 15px;
        line-height: 1.6;
        color: #334155;
        background: #fff;
    }
    .email-body-textarea:focus { outline: 2px solid var(--accent); border-color: transparent; }

    /* Buttons */
    .btn-gen { width: 100%; padding: 12px; background: var(--accent); color: white; border: none; border-radius: 8px; font-weight: 700; cursor: pointer; transition: 0.2s; }
    .btn-gen:hover { background: #1d4ed8; }

    .btn-send {
        padding: 15px 30px; background: var(--green-accent); color: white; border: none; border-radius: 8px; font-weight: 800; font-size: 16px; cursor: pointer; display: flex; align-items: center; gap: 10px; margin-left: auto; transition: 0.2s;
    }
    .btn-send:hover { background: #059669; box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3); }

    @keyframes fadeIn { from { opacity:0; transform: translateY(5px); } to { opacity:1; transform: translateY(0); } }
  </style>
</head>
<body>

  <aside class="sidebar">
    <h2>SUBURBAN BREWING</h2>
    <div style="margin-top: 40px;">
        <span class="mock-link">Command Center</span>
        <span class="mock-link">Sales Opportunities</span>
        <span class="mock-link active">Sales AI Assistant</span>
    </div>
  </aside>

  <main class="main">
    <header class="topbar">
      <h1>Sales Follow-Up Assistant</h1>
      <div>
          <span style="font-size: 13px; color: var(--text-muted);">Drafts use professional, pre-approved templates.</span>
      </div>
    </header>

    <section class="content">
      <div class="assistant-grid">
        
        <div class="panel">
            <h3>1. Drafting Options</h3>
            
            <div class="form-group">
                <label class="form-label">Select Client / Lead</label>
                <select class="form-select" id="clientSelect" onchange="showClientInfo()">
                    <option value="">-- Choose a Contact --</option>
                    <option value="brickhouse">The Brickhouse (Due for Contact)</option>
                    <option value="taproom24">Taproom 24</option>
                    <option value="pizzaco">City Pizza Co. (New Lead)</option>
                </select>
                <div id="clientInfo" class="client-card-preview">
                    <div style="font-weight: 700;">Contact: Sarah Johnson (Mgr)</div>
                    <div style="font-size: 13px; color: #64748b;">Last Contact: 18 days ago via In-Person</div>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">Choose Goal / Tone</label>
                <select class="form-select" id="templateSelect">
                    <option value="casual">Casual Tap Check-in (Existing)</option>
                    <option value="seasonal">Introduce Summer Seasonal (Excited)</option>
                    <option value="formal">Formal Meeting Follow-up</option>
                    <option value="invoice">Friendly Invoice Reminder</option>
                </select>
            </div>

            <button class="btn-gen" onclick="generateDraft()">Generate Professional Draft ‚ú®</button>
            <p style="font-size: 12px; color: #94a3b8; text-align: center; margin-top: 15px;">AI generates the base; you add the personal touch.</p>
        </div>

        <div class="panel">
            <h3>2. Review & Customize</h3>
            
            <div class="email-editor-container">
                <div class="email-header-field">
                    <span class="email-header-label">To:</span>
                    <span class="email-header-value" id="previewTo">...</span>
                </div>
                <div class="email-header-field">
                    <span class="email-header-label">Subject:</span>
                    <input type="text" class="form-input" id="previewSubject" placeholder="Subject will appear here..." style="border:none; padding: 0; font-weight: 500;">
                </div>
                
                <textarea class="email-body-textarea" id="previewBody" placeholder="Select options on the left and click 'Generate Draft'. The professional template will appear here for you to review and customize before sending."></textarea>

                <div style="display: flex; justify-content: flex-end; align-items: center; margin-top: 10px;">
                    <div style="margin-right: 20px; font-size: 13px; color: #64748b; font-style: italic;">Sending will update "Last Contact Date" automatically.</div>
                    <button class="btn-send" onclick="alert('Simulated Send: Email sent via Gmail API and Google Sheet updated!')">
                        <span>üöÄ Send Email Now</span>
                    </button>
                </div>
            </div>
        </div>

      </div>
    </section>
  </main>

  <script>
    // --- MOCK JAVASCRIPT FOR VISUALIZATION ---
    function showClientInfo() {
        const val = document.getElementById('clientSelect').value;
        const infoBox = document.getElementById('clientInfo');
        infoBox.classList.toggle('active', val !== "");
    }

    function generateDraft() {
        const client = document.getElementById('clientSelect').value;
        const template = document.getElementById('templateSelect').value;
        
        if(!client) { alert("Please select a client first."); return; }

        document.getElementById('previewTo').innerText = "Sarah Johnson <sarah@thebrickhouse.com>";

        // Simulated Template Logic (In real life, this happens in Google Apps Script)
        let subject = "";
        let body = "";

        if(template === 'casual') {
            subject = "Checking in on taps at The Brickhouse";
            body = `Hi Sarah,\n\nHope things are going well at The Brickhouse this week.\n\nJust wanted to quickly check in and see how the Suburban IPA is moving. Are you running low or looking to rotate anything soon?\n\n[Add personal note here]\n\nCheers,\nRemy\nSuburban Brewing Co.`;
        } else if (template === 'seasonal') {
            subject = "Exciting News: Summer Seasonal is Ready! ‚òÄÔ∏è";
            body = `Hi Sarah,\n\nI'm reaching out because our highly anticipated Summer Ale is finally kegged and ready to go.\n\nGiven how well your customers liked our previous lighter options, I think this would crush it on your patio tap this month.\n\nDo you have an open line for a sample this week?\n\nBest,\nRemy\nSuburban Brewing Co.`;
        }

        // Populate the editor
        document.getElementById('previewSubject').value = subject;
        document.getElementById('previewBody').value = body;
        
        // Focus the textarea so they know they can edit it
        document.getElementById('previewBody').focus();
    }
  </script>
</body>
</html>
